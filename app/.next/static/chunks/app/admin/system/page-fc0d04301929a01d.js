(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8407],{968:function(e,s,t){Promise.resolve().then(t.bind(t,8960))},8960:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var a=t(7437),r=t(2265),n=t(6413),i=t(9376),c=t(6070),l=t(2869),d=t(5974),o=t(1828),m=t(1671),u=t(6865),x=t(2660),h=t(8728),f=t(4401),g=t(91),p=t(9345),y=t(8906),j=t(7648),v=t(429),b=t(5153);function N(){let{user:e,loading:s}=(0,n.a)(),t=(0,i.useRouter)(),{toast:N}=(0,b.pm)(),[w,S]=(0,r.useState)(null),[C,k]=(0,r.useState)(null),[E,A]=(0,r.useState)(!0),[T,Z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s||e&&"SUPER_ADMIN"===e.role||t.push("/dashboard")},[e,s,t]),(0,r.useEffect)(()=>{e&&"SUPER_ADMIN"===e.role&&O()},[e]);let O=async()=>{try{let[e,s]=await Promise.all([fetch("/api/admin/system/settings"),fetch("/api/admin/system/health")]);if(e.ok){let s=await e.json();S(s)}if(s.ok){let e=await s.json();k(e)}}catch(e){console.error("Failed to fetch system data:",e)}finally{A(!1)}},_=async(e,s)=>{if(w){Z(!0);try{if((await fetch("/api/admin/system/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({[e]:s})})).ok)S({...w,[e]:s}),N({title:"Settings updated",description:"System settings have been saved successfully."});else throw Error("Failed to update settings")}catch(e){N({title:"Error",description:"Failed to update settings. Please try again.",variant:"destructive"})}finally{Z(!1)}}},R=e=>{switch(e){case"healthy":return(0,a.jsx)(m.Z,{className:"h-5 w-5 text-green-500"});case"warning":return(0,a.jsx)(u.Z,{className:"h-5 w-5 text-orange-500"});case"error":return(0,a.jsx)(u.Z,{className:"h-5 w-5 text-red-500"})}},M=e=>{switch(e){case"healthy":return(0,a.jsx)(d.C,{className:"bg-green-600",children:"Healthy"});case"warning":return(0,a.jsx)(d.C,{variant:"outline",className:"border-orange-500 text-orange-700",children:"Warning"});case"error":return(0,a.jsx)(d.C,{variant:"destructive",children:"Error"})}};return s||!e||"SUPER_ADMIN"!==e.role?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-orange-600"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(j.default,{href:"/admin",className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Back to Admin"})]}),(0,a.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.Z,{className:"h-6 w-6 text-orange-600"}),(0,a.jsx)("span",{className:"text-xl font-semibold text-gray-900",children:"System Settings"})]})]}),(0,a.jsx)(d.C,{variant:"secondary",children:"Admin Panel"})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)(v.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"System Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Configure system settings and monitor platform health"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)(v.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},children:(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"System Health"})]}),(0,a.jsx)(c.SZ,{children:"Monitor the health of system components"})]}),(0,a.jsx)(c.aY,{children:E?(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3,4].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"h-5 w-5 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-4 w-20 bg-gray-200 rounded"})]}),(0,a.jsx)("div",{className:"h-6 w-16 bg-gray-200 rounded"})]},e))}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 text-gray-600"}),(0,a.jsx)("span",{className:"font-medium",children:"Database"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[C&&R(C.database),C&&M(C.database)]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 text-gray-600"}),(0,a.jsx)("span",{className:"font-medium",children:"Email Service"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[C&&R(C.email),C&&M(C.email)]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 text-gray-600"}),(0,a.jsx)("span",{className:"font-medium",children:"File Storage"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[C&&R(C.storage),C&&M(C.storage)]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(y.Z,{className:"h-5 w-5 text-gray-600"}),(0,a.jsx)("span",{className:"font-medium",children:"Payment Processing"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[C&&R(C.payments),C&&M(C.payments)]})]})]})})]})}),(0,a.jsx)(v.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"System Configuration"})]}),(0,a.jsx)(c.SZ,{children:"Manage global system settings"})]}),(0,a.jsx)(c.aY,{children:E?(0,a.jsx)("div",{className:"space-y-6",children:[1,2,3,4,5].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between animate-pulse",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"h-4 w-32 bg-gray-200 rounded mb-1"}),(0,a.jsx)("div",{className:"h-3 w-48 bg-gray-200 rounded"})]}),(0,a.jsx)("div",{className:"h-6 w-11 bg-gray-200 rounded-full"})]},e))}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Maintenance Mode"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Temporarily disable the platform for maintenance"})]}),(0,a.jsx)(o.r,{checked:(null==w?void 0:w.maintenanceMode)||!1,onCheckedChange:e=>_("maintenanceMode",e),disabled:T})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"User Registration"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Allow new users to create accounts"})]}),(0,a.jsx)(o.r,{checked:(null==w?void 0:w.registrationEnabled)||!1,onCheckedChange:e=>_("registrationEnabled",e),disabled:T})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Email Notifications"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Send automated email notifications to users"})]}),(0,a.jsx)(o.r,{checked:(null==w?void 0:w.emailNotifications)||!1,onCheckedChange:e=>_("emailNotifications",e),disabled:T})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Auto-approve Venues"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Automatically approve new venue listings"})]}),(0,a.jsx)(o.r,{checked:(null==w?void 0:w.autoApproveVenues)||!1,onCheckedChange:e=>_("autoApproveVenues",e),disabled:T})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Email Verification"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Require email verification for new accounts"})]}),(0,a.jsx)(o.r,{checked:(null==w?void 0:w.requireEmailVerification)||!1,onCheckedChange:e=>_("requireEmailVerification",e),disabled:T})]})]})})]})})]}),(0,a.jsx)(v.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},className:"mt-8",children:(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{children:"System Actions"}),(0,a.jsx)(c.SZ,{children:"Perform administrative actions on the system"})]}),(0,a.jsx)(c.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(l.z,{variant:"outline",className:"h-20 flex flex-col items-center justify-center space-y-2 border-orange-200 text-orange-700 hover:bg-orange-50",onClick:()=>{N({title:"Cache cleared",description:"System cache has been cleared successfully."})},children:[(0,a.jsx)(g.Z,{className:"h-6 w-6"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Clear Cache"})]}),(0,a.jsxs)(l.z,{variant:"outline",className:"h-20 flex flex-col items-center justify-center space-y-2 border-orange-200 text-orange-700 hover:bg-orange-50",onClick:()=>{N({title:"Backup initiated",description:"System backup has been started."})},children:[(0,a.jsx)(y.Z,{className:"h-6 w-6"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Create Backup"})]}),(0,a.jsxs)(l.z,{variant:"outline",className:"h-20 flex flex-col items-center justify-center space-y-2 border-orange-200 text-orange-700 hover:bg-orange-50",onClick:()=>{O(),N({title:"Health check completed",description:"System health has been refreshed."})},children:[(0,a.jsx)(f.Z,{className:"h-6 w-6"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Run Health Check"})]})]})})]})})]})]})}},6413:function(e,s,t){"use strict";t.d(s,{AuthProvider:function(){return i},a:function(){return c}});var a=t(7437),r=t(2265);let n=(0,r.createContext)(void 0);function i(e){let{children:s}=e,[t,i]=(0,r.useState)(null),[c,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{l(!1)},[]);let d=async(e,s)=>!1,o=async e=>!1;return(0,a.jsx)(n.Provider,{value:{user:t,loading:c,login:d,logout:()=>{i(null)},register:o},children:s})}function c(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5974:function(e,s,t){"use strict";t.d(s,{C:function(){return c}});var a=t(7437);t(2265);var r=t(7712),n=t(4508);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:t}),s),...r})}},2869:function(e,s,t){"use strict";t.d(s,{z:function(){return d}});var a=t(7437),r=t(2265),n=t(7053),i=t(7712),c=t(4508);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,s)=>{let{className:t,variant:r,size:i,asChild:d=!1,...o}=e,m=d?n.g7:"button";return(0,a.jsx)(m,{className:(0,c.cn)(l({variant:r,size:i,className:t})),ref:s,...o})});d.displayName="Button"},6070:function(e,s,t){"use strict";t.d(s,{Ol:function(){return c},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return l}});var a=t(7437),r=t(2265),n=t(4508);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});i.displayName="Card";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});c.displayName="CardHeader";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});l.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},1828:function(e,s,t){"use strict";t.d(s,{r:function(){return c}});var a=t(7437),r=t(2265),n=t(721),i=t(4508);let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:(0,a.jsx)(n.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});c.displayName=n.fC.displayName},5153:function(e,s,t){"use strict";t.d(s,{pm:function(){return u}});var a=t(2265);let r=0,n=new Map,i=e=>{if(n.has(e))return;let s=setTimeout(()=>{n.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,s)},c=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},l=[],d={toasts:[]};function o(e){d=c(d,e),l.forEach(e=>{e(d)})}function m(e){let{...s}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,s]=a.useState(d);return a.useEffect(()=>(l.push(s),()=>{let e=l.indexOf(s);e>-1&&l.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},4508:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var a=t(1994),r=t(3335);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}}},function(e){e.O(0,[8590,4671,429,8883,2971,2117,1744],function(){return e(e.s=968)}),_N_E=e.O()}]);