(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8870],{5352:function(e,a,s){Promise.resolve().then(s.bind(s,4664))},4664:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return z}});var i={};s.r(i);var t=s(7437),l=s(2265),n=s(6413),r=s(9376),c=s(6070),d=s(2869),o=s(5974),u=s(5186),m=s(6815),h=s(6818),x=s(3647),p=s(1828),g=s(2660),v=s(8501),j=s(5805),f=s(8728),y=s(3774),N=s(3041),b=s(3229),w=s(1723),E=s(7648),D=s(429),I=s(5153),F=s(987),C=s(2339),T=s(3113),k=s(8617);s(5598);var U=s(3145),S=s(6110),V=s(9397),O=s(5868),Z=s(8930);let _=[{value:"MENU",label:"Menu"},{value:"FOOD",label:"Food"},{value:"INTERIOR",label:"Interior"},{value:"EXTERIOR",label:"Exterior"},{value:"STAFF",label:"Staff"},{value:"EVENT",label:"Event"},{value:"OTHER",label:"Other"}];function P(e){let{venueId:a,canUpload:s,maxImages:n,disabled:r=!1}=e,[h,p]=(0,l.useState)([]),[g,v]=(0,l.useState)(!0),[j,f]=(0,l.useState)(!1),[y,N]=(0,l.useState)(null),[b,w]=(0,l.useState)({url:"",alt:"",type:"FOOD"}),[E,D]=(0,l.useState)(!1),{toast:F}=(0,I.pm)();(0,l.useEffect)(()=>{C()},[a]);let C=async()=>{try{let e=await fetch("/api/venues/".concat(a,"/images"),{credentials:"include"});if(e.ok){let a=await e.json();p(a.images||[])}else console.error("Failed to fetch images")}catch(e){console.error("Error fetching images:",e)}finally{v(!1)}},k=async e=>{w(a=>({...a,url:e}))},P=async()=>{if(!b.url||!b.type){F({title:"Missing information",description:"Please upload an image and select a type.",variant:"destructive"});return}f(!0);try{let e=await fetch("/api/venues/".concat(a,"/images"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({url:b.url,alt:b.alt,type:b.type,displayOrder:h.length})});if(e.ok){let a=await e.json();p(e=>[...e,a.image]),w({url:"",alt:"",type:"FOOD"}),D(!1),F({title:"Image added",description:"Your image has been added to the gallery."})}else{let a=await e.json();throw Error(a.error||"Failed to add image")}}catch(e){F({title:"Failed to add image",description:e.message,variant:"destructive"})}finally{f(!1)}},A=async e=>{try{let s=await fetch("/api/venues/".concat(a,"/images/").concat(e),{method:"DELETE",credentials:"include"});if(s.ok)p(a=>a.filter(a=>a.id!==e)),F({title:"Image deleted",description:"The image has been removed from your gallery."});else{let e=await s.json();throw Error(e.error||"Failed to delete image")}}catch(e){F({title:"Failed to delete image",description:e.message,variant:"destructive"})}},R=async()=>{if(y)try{let e=await fetch("/api/venues/".concat(a,"/images/").concat(y.id),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({alt:y.alt,type:y.type})});if(e.ok){let a=await e.json();p(e=>e.map(e=>e.id===y.id?a.image:e)),N(null),F({title:"Image updated",description:"Your image details have been updated."})}else{let a=await e.json();throw Error(a.error||"Failed to update image")}}catch(e){F({title:"Failed to update image",description:e.message,variant:"destructive"})}};return g?(0,t.jsxs)(c.Zb,{children:[(0,t.jsx)(c.Ol,{children:(0,t.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(T.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Image Gallery"})]})}),(0,t.jsx)(c.aY,{children:(0,t.jsx)("div",{className:"animate-pulse space-y-4",children:(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"aspect-square bg-gray-200 rounded-lg"},e))})})})]}):s?(0,t.jsxs)(c.Zb,{children:[(0,t.jsx)(c.Ol,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(T.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Image Gallery"}),(0,t.jsxs)(o.C,{variant:"secondary",children:[h.length,"/",n]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Showcase your venue with beautiful images"})]}),h.length<n&&(0,t.jsxs)(S.Vq,{open:E,onOpenChange:D,children:[(0,t.jsx)(S.hg,{asChild:!0,children:(0,t.jsxs)(d.z,{disabled:r,children:[(0,t.jsx)(V.Z,{className:"h-4 w-4 mr-2"}),"Add Image"]})}),(0,t.jsxs)(S.cZ,{className:"max-w-2xl",children:[(0,t.jsx)(S.fK,{children:(0,t.jsx)(S.$N,{children:"Add New Image"})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(i.default,{onUpload:k,currentImage:b.url,onRemove:()=>w(e=>({...e,url:""})),disabled:j,aspectRatio:"aspect-video"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"imageType",children:"Image Type"}),(0,t.jsxs)(x.Ph,{value:b.type,onValueChange:e=>w(a=>({...a,type:e})),children:[(0,t.jsx)(x.i4,{children:(0,t.jsx)(x.ki,{placeholder:"Select image type"})}),(0,t.jsx)(x.Bw,{children:_.map(e=>(0,t.jsx)(x.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"imageAlt",children:"Description (Optional)"}),(0,t.jsx)(u.I,{id:"imageAlt",placeholder:"Describe the image...",value:b.alt,onChange:e=>w(a=>({...a,alt:e.target.value}))})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(d.z,{variant:"outline",onClick:()=>D(!1),disabled:j,children:"Cancel"}),(0,t.jsx)(d.z,{onClick:P,disabled:j||!b.url,children:j?"Adding...":"Add Image"})]})]})]})]})]})}),(0,t.jsx)(c.aY,{children:0===h.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(T.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No images yet"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Start building your gallery by adding your first image"})]}):(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:h.map(e=>{var a;return(0,t.jsxs)("div",{className:"group relative",children:[(0,t.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:(0,t.jsx)(U.default,{src:e.url,alt:e.alt||"Venue image",fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-200",sizes:"(max-width: 768px) 50vw, (max-width: 1200px) 33vw, 25vw"})}),(0,t.jsx)("div",{className:"absolute top-2 left-2",children:(0,t.jsx)(o.C,{variant:"secondary",className:"text-xs",children:(null===(a=_.find(a=>a.value===e.type))||void 0===a?void 0:a.label)||e.type})}),(0,t.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)(d.z,{size:"sm",variant:"secondary",onClick:()=>N(e),disabled:r,children:(0,t.jsx)(O.Z,{className:"h-3 w-3"})}),(0,t.jsx)(d.z,{size:"sm",variant:"destructive",onClick:()=>A(e.id),disabled:r,children:(0,t.jsx)(Z.Z,{className:"h-3 w-3"})})]})})]},e.id)})})}),(0,t.jsx)(S.Vq,{open:!!y,onOpenChange:()=>N(null),children:(0,t.jsxs)(S.cZ,{children:[(0,t.jsx)(S.fK,{children:(0,t.jsx)(S.$N,{children:"Edit Image"})}),y&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden relative",children:(0,t.jsx)(U.default,{src:y.url,alt:y.alt||"Venue image",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 50vw"})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"editImageType",children:"Image Type"}),(0,t.jsxs)(x.Ph,{value:y.type,onValueChange:e=>N(a=>a?{...a,type:e}:null),children:[(0,t.jsx)(x.i4,{children:(0,t.jsx)(x.ki,{})}),(0,t.jsx)(x.Bw,{children:_.map(e=>(0,t.jsx)(x.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"editImageAlt",children:"Description"}),(0,t.jsx)(u.I,{id:"editImageAlt",placeholder:"Describe the image...",value:y.alt||"",onChange:e=>N(a=>a?{...a,alt:e.target.value}:null)})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(d.z,{variant:"outline",onClick:()=>N(null),children:"Cancel"}),(0,t.jsx)(d.z,{onClick:R,children:"Update Image"})]})]})]})})]}):(0,t.jsxs)(c.Zb,{children:[(0,t.jsx)(c.Ol,{children:(0,t.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(T.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Image Gallery"}),(0,t.jsx)(o.C,{variant:"outline",children:"Premium Feature"})]})}),(0,t.jsx)(c.aY,{children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(T.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upgrade to Premium"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Upload gallery images to showcase your venue, menu, and atmosphere with a Premium subscription."}),(0,t.jsx)(d.z,{children:"Upgrade Now"})]})})]})}function A(e){let{venueId:a,currentLogo:s,currentHeaderImage:n,disabled:r=!1}=e,[d,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(s),[x,p]=(0,l.useState)(n),[g,v]=(0,l.useState)(!0),{toast:j}=(0,I.pm)();(0,l.useEffect)(()=>{f()},[a]);let f=async()=>{try{let i=await fetch("/api/venues/".concat(a),{credentials:"include"});if(i.ok){var e,s;let a=await i.json(),t=(null===(s=a.venue)||void 0===s?void 0:null===(e=s.subscription)||void 0===e?void 0:e.plan)||"FREE";u({canUploadLogo:!0,canUploadHeader:!0,canUploadGallery:"PREMIUM"===t||"PAID"===t,maxGalleryImages:"PREMIUM"===t||"PAID"===t?20:0,plan:t})}}catch(e){console.error("Error fetching permissions:",e)}finally{v(!1)}},y=async e=>{try{let s=await fetch("/api/venues/".concat(a,"/logo"),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({logoUrl:e})});if(s.ok)h(e),j({title:"Logo updated",description:"Your venue logo has been updated successfully."});else{let e=await s.json();throw Error(e.error||"Failed to update logo")}}catch(e){j({title:"Failed to update logo",description:e.message,variant:"destructive"})}},N=async()=>{try{let e=await fetch("/api/venues/".concat(a,"/logo"),{method:"DELETE",credentials:"include"});if(e.ok)h(void 0),j({title:"Logo removed",description:"Your venue logo has been removed."});else{let a=await e.json();throw Error(a.error||"Failed to remove logo")}}catch(e){j({title:"Failed to remove logo",description:e.message,variant:"destructive"})}},b=async e=>{try{let s=await fetch("/api/venues/".concat(a,"/header-image"),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({headerImageUrl:e})});if(s.ok)p(e),j({title:"Header image updated",description:"Your venue header image has been updated successfully."});else{let e=await s.json();throw Error(e.error||"Failed to update header image")}}catch(e){j({title:"Failed to update header image",description:e.message,variant:"destructive"})}},w=async()=>{try{let e=await fetch("/api/venues/".concat(a,"/header-image"),{method:"DELETE",credentials:"include"});if(e.ok)p(void 0),j({title:"Header image removed",description:"Your venue header image has been removed."});else{let a=await e.json();throw Error(a.error||"Failed to remove header image")}}catch(e){j({title:"Failed to remove header image",description:e.message,variant:"destructive"})}};return g?(0,t.jsxs)(c.Zb,{children:[(0,t.jsx)(c.Ol,{children:(0,t.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(T.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Venue Images"})]})}),(0,t.jsx)(c.aY,{children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-32 bg-gray-200 rounded-lg"}),(0,t.jsx)("div",{className:"h-32 bg-gray-200 rounded-lg"})]})})]}):d?(0,t.jsxs)(c.Zb,{children:[(0,t.jsx)(c.Ol,{children:(0,t.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(T.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Venue Images"}),(0,t.jsx)(o.C,{variant:"outline",className:"flex items-center space-x-1",children:"PREMIUM"===d.plan||"PAID"===d.plan?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Z,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:d.plan})]}):(0,t.jsx)("span",{children:"FREE"})})]})}),(0,t.jsx)(c.aY,{children:(0,t.jsxs)(C.mQ,{defaultValue:"basic",className:"space-y-6",children:[(0,t.jsxs)(C.dr,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(C.SP,{value:"basic",children:"Logo & Header"}),(0,t.jsx)(C.SP,{value:"gallery",children:"Gallery"})]}),(0,t.jsx)(C.nU,{value:"basic",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)(i.default,{onUpload:y,currentImage:m,onRemove:N,disabled:r||!d.canUploadLogo,label:"Venue Logo",description:"Upload your venue logo (recommended: square format)",aspectRatio:"aspect-square"}),(0,t.jsx)(i.default,{onUpload:b,currentImage:x,onRemove:w,disabled:r||!d.canUploadHeader,label:"Header Image",description:"Upload a header image for your venue profile",aspectRatio:"aspect-video"})]})}),(0,t.jsx)(C.nU,{value:"gallery",children:(0,t.jsx)(P,{venueId:a,canUpload:d.canUploadGallery,maxImages:d.maxGalleryImages,disabled:r})})]})})]}):(0,t.jsxs)(c.Zb,{children:[(0,t.jsx)(c.Ol,{children:(0,t.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(T.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Venue Images"})]})}),(0,t.jsx)(c.aY,{children:(0,t.jsx)("p",{className:"text-gray-600",children:"Unable to load image permissions."})})]})}let R=[{value:"RESTAURANT",label:"Restaurant"},{value:"CAFE",label:"Cafe"},{value:"BAR",label:"Bar"},{value:"PUB",label:"Pub"},{value:"FOOD_TRUCK",label:"Food Truck"},{value:"FINE_DINING",label:"Fine Dining"},{value:"FAST_CASUAL",label:"Fast Casual"},{value:"BAKERY",label:"Bakery"},{value:"OTHER",label:"Other"}];function z(){var e,a,s,i,C;let{user:T,loading:k}=(0,n.a)(),U=(0,r.useRouter)(),S=(0,r.useParams)(),{toast:V}=(0,I.pm)(),O=S.id,[Z,_]=(0,l.useState)(null),[P,z]=(0,l.useState)(!0),[Y,q]=(0,l.useState)(!1),[H,B]=(0,l.useState)(!1),[L,G]=(0,l.useState)([]),[M,J]=(0,l.useState)({name:"",description:"",address:"",city:"",postcode:"",phone:"",email:"",website:"",cuisine:"",venueType:"",capacity:"",isActive:!0});(0,l.useEffect)(()=>{k||T||U.push("/auth/login")},[T,k,U]),(0,l.useEffect)(()=>{T&&O&&K()},[T,O]);let K=async()=>{try{let a=await fetch("/api/venues/".concat(O),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(a.ok){var e;let s=await a.json();_(s.venue),J({name:s.venue.name||"",description:s.venue.description||"",address:s.venue.address||"",city:s.venue.city||"",postcode:s.venue.postcode||"",phone:s.venue.phone||"",email:s.venue.email||"",website:s.venue.website||"",cuisine:s.venue.cuisine||"",venueType:s.venue.venueType||"",capacity:(null===(e=s.venue.capacity)||void 0===e?void 0:e.toString())||"",isActive:s.venue.isActive}),Q()}else 404===a.status?(V({title:"Venue not found",description:"The venue you are looking for does not exist.",variant:"destructive"}),U.push("/dashboard/venues")):(console.error("Failed to fetch venue:",a.status),V({title:"Error",description:"Failed to load venue details.",variant:"destructive"}))}catch(e){console.error("Network error fetching venue:",e),V({title:"Error",description:"Network error while loading venue details.",variant:"destructive"})}finally{z(!1)}},Q=async()=>{try{let e=await fetch("/api/venues/".concat(O,"/opening-hours"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(e.ok){let a=await e.json();G(a.openingHours||[])}}catch(e){console.error("Failed to fetch opening hours:",e)}},$=e=>{J({...M,[e.target.name]:e.target.value})},W=async()=>{if(!L||0===L.length){V({title:"No opening hours to save",description:"Please add some opening hours before saving.",variant:"destructive"});return}B(!0),console.log("\uD83D\uDD35 [VENUE_EDIT] Saving opening hours separately:",L);try{let e=await fetch("/api/venues/".concat(O,"/opening-hours"),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({openingHours:L})});if(e.ok){let a=await e.json();console.log("\uD83D\uDFE2 [VENUE_EDIT] Opening hours saved successfully:",a),await Q(),V({title:"Opening hours saved!",description:"Your opening hours have been updated successfully."})}else{let a=await e.text();console.error("\uD83D\uDD34 [VENUE_EDIT] Failed to save opening hours:",e.status,a),V({title:"Failed to save opening hours",description:"There was an error saving your opening hours. Please try again.",variant:"destructive"})}}catch(e){console.error("\uD83D\uDD34 [VENUE_EDIT] Network error saving opening hours:",e),V({title:"Network error",description:"Failed to save opening hours due to network error. Please try again.",variant:"destructive"})}finally{B(!1),console.log("\uD83D\uDD35 [VENUE_EDIT] Opening hours save operation completed")}},X=async e=>{e.preventDefault(),e.stopPropagation(),console.log("\uD83D\uDD35 [VENUE_EDIT] Form submission started"),q(!0);try{console.log("\uD83D\uDD35 [VENUE_EDIT] Updating venue details:",M);let e=await fetch("/api/venues/".concat(O),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({...M,capacity:parseInt(M.capacity)})});if(e.ok){let a=await e.json();console.log("\uD83D\uDFE2 [VENUE_EDIT] Venue updated successfully:",a.venue),_(a.venue),V({title:"Venue updated!",description:"Your venue details have been updated successfully."}),console.log("\uD83D\uDFE2 [VENUE_EDIT] Form submission completed successfully")}else{let a=await e.json();throw console.error("\uD83D\uDD34 [VENUE_EDIT] Venue update failed:",a),Error(a.error||"Failed to update venue")}}catch(e){console.error("\uD83D\uDD34 [VENUE_EDIT] Form submission error:",e),V({title:"Failed to update venue",description:e.message,variant:"destructive"})}finally{q(!1),console.log("\uD83D\uDD35 [VENUE_EDIT] Form submission ended")}};return k||P?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):Z?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(E.default,{href:"/dashboard",className:"flex items-center space-x-2",children:[(0,t.jsx)(v.Z,{className:"h-8 w-8 text-blue-600"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"Sully"})]}),(0,t.jsx)(o.C,{variant:"secondary",children:"Venue Management"})]}),(0,t.jsx)(E.default,{href:"/dashboard/venues",children:(0,t.jsxs)(d.z,{variant:"outline",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Back to Venues"]})})]})})}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)(D.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"mb-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:Z.name}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage your venue details and settings"})]}),(0,t.jsx)(o.C,{variant:Z.isActive?"default":"secondary",className:"text-sm",children:Z.isActive?"Active":"Inactive"})]})}),(0,t.jsxs)(D.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{className:"flex flex-row items-center space-y-0 pb-2",children:[(0,t.jsx)(c.ll,{className:"text-sm font-medium",children:"Total Bookings"}),(0,t.jsx)(v.Z,{className:"h-4 w-4 ml-auto text-blue-600"})]}),(0,t.jsxs)(c.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null===(e=Z._count)||void 0===e?void 0:e.bookings)||0}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(null===(a=Z.subscription)||void 0===a?void 0:a.bookingsUsed)||0,"/",(null===(s=Z.subscription)||void 0===s?void 0:s.bookingsLimit)||"âˆž"," this period"]})]})]}),(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{className:"flex flex-row items-center space-y-0 pb-2",children:[(0,t.jsx)(c.ll,{className:"text-sm font-medium",children:"Tables"}),(0,t.jsx)(j.Z,{className:"h-4 w-4 ml-auto text-green-600"})]}),(0,t.jsxs)(c.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null===(i=Z._count)||void 0===i?void 0:i.tables)||0}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Capacity: ",Z.capacity," guests"]})]})]}),(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{className:"flex flex-row items-center space-y-0 pb-2",children:[(0,t.jsx)(c.ll,{className:"text-sm font-medium",children:"Subscription"}),(0,t.jsx)(f.Z,{className:"h-4 w-4 ml-auto text-purple-600"})]}),(0,t.jsxs)(c.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null===(C=Z.subscription)||void 0===C?void 0:C.plan)||"Unknown"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Current plan"})]})]})]}),(0,t.jsx)(D.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsx)(c.ll,{children:"Venue Details"}),(0,t.jsx)(c.SZ,{children:"Update your venue information and settings"})]}),(0,t.jsx)(c.aY,{children:(0,t.jsxs)("form",{onSubmit:X,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium flex items-center",children:[(0,t.jsx)(f.Z,{className:"h-5 w-5 mr-2"}),"Basic Information"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"name",children:"Venue Name *"}),(0,t.jsx)(u.I,{id:"name",name:"name",value:M.name,onChange:$,required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"venueType",children:"Venue Type *"}),(0,t.jsxs)(x.Ph,{value:M.venueType,onValueChange:e=>{J({...M,venueType:e})},required:!0,children:[(0,t.jsx)(x.i4,{children:(0,t.jsx)(x.ki,{placeholder:"Select venue type"})}),(0,t.jsx)(x.Bw,{children:R.map(e=>(0,t.jsx)(x.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"description",children:"Description"}),(0,t.jsx)(h.g,{id:"description",name:"description",value:M.description,onChange:$,rows:3})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"cuisine",children:"Cuisine Type"}),(0,t.jsx)(u.I,{id:"cuisine",name:"cuisine",value:M.cuisine,onChange:$})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"capacity",children:"Capacity *"}),(0,t.jsx)(u.I,{id:"capacity",name:"capacity",type:"number",value:M.capacity,onChange:$,required:!0})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p.r,{id:"isActive",checked:M.isActive,onCheckedChange:e=>{J({...M,isActive:e})}}),(0,t.jsx)(m._,{htmlFor:"isActive",children:"Venue is active and accepting bookings"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium flex items-center",children:[(0,t.jsx)(y.Z,{className:"h-5 w-5 mr-2"}),"Location"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"address",children:"Address *"}),(0,t.jsx)(u.I,{id:"address",name:"address",value:M.address,onChange:$,required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"city",children:"City *"}),(0,t.jsx)(u.I,{id:"city",name:"city",value:M.city,onChange:$,required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"postcode",children:"Postcode *"}),(0,t.jsx)(u.I,{id:"postcode",name:"postcode",value:M.postcode,onChange:$,required:!0})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium flex items-center",children:[(0,t.jsx)(N.Z,{className:"h-5 w-5 mr-2"}),"Contact Information"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"phone",children:"Phone Number *"}),(0,t.jsx)(u.I,{id:"phone",name:"phone",type:"tel",value:M.phone,onChange:$,required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"email",children:"Email Address *"}),(0,t.jsx)(u.I,{id:"email",name:"email",type:"email",value:M.email,onChange:$,required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"website",children:"Website"}),(0,t.jsx)(u.I,{id:"website",name:"website",type:"url",value:M.website,onChange:$})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,t.jsx)(E.default,{href:"/dashboard/venues",children:(0,t.jsx)(d.z,{variant:"outline",children:"Cancel"})}),(0,t.jsxs)(d.z,{type:"submit",disabled:Y,children:[(0,t.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),Y?"Saving...":"Save Changes"]})]})]})})]})}),(0,t.jsx)(D.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},className:"mt-8",children:(0,t.jsxs)(c.Zb,{children:[(0,t.jsx)(c.Ol,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(w.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Opening Hours"})]}),(0,t.jsx)(c.SZ,{children:"Set multiple time slots for each day of the week. Perfect for lunch and dinner services."})]}),(0,t.jsxs)(d.z,{onClick:W,disabled:H||Y,className:"flex items-center space-x-2",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:H?"Saving...":"Save Opening Hours"})]})]})}),(0,t.jsx)(c.aY,{children:(0,t.jsx)(F.Z,{openingHours:L,onChange:G,disabled:Y||H})})]})}),(0,t.jsx)(D.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"mt-8",children:(0,t.jsx)(A,{venueId:O,currentLogo:Z.logoUrl||void 0,currentHeaderImage:Z.headerImageUrl||void 0,disabled:Y||H})})]})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Venue not found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"The venue you are looking for does not exist."}),(0,t.jsx)(E.default,{href:"/dashboard/venues",children:(0,t.jsxs)(d.z,{children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Back to Venues"]})})]})})}},6110:function(e,a,s){"use strict";s.d(a,{$N:function(){return x},Be:function(){return p},Vq:function(){return c},cZ:function(){return m},fK:function(){return h},hg:function(){return d}});var i=s(7437),t=s(2265),l=s(9027),n=s(2489),r=s(4508);let c=l.fC,d=l.xz,o=l.h_;l.x8;let u=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)(l.aV,{ref:a,className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t})});u.displayName=l.aV.displayName;let m=t.forwardRef((e,a)=>{let{className:s,children:t,...c}=e;return(0,i.jsxs)(o,{children:[(0,i.jsx)(u,{}),(0,i.jsxs)(l.VY,{ref:a,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...c,children:[t,(0,i.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,i.jsx)(n.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.VY.displayName;let h=e=>{let{className:a,...s}=e;return(0,i.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};h.displayName="DialogHeader";let x=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)(l.Dx,{ref:a,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",s),...t})});x.displayName=l.Dx.displayName;let p=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)(l.dk,{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",s),...t})});p.displayName=l.dk.displayName},2339:function(e,a,s){"use strict";s.d(a,{SP:function(){return d},dr:function(){return c},mQ:function(){return r},nU:function(){return o}});var i=s(7437),t=s(2265),l=s(1312),n=s(4508);let r=l.fC,c=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)(l.aV,{ref:a,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t})});c.displayName=l.aV.displayName;let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)(l.xz,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t})});d.displayName=l.xz.displayName;let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)(l.VY,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t})});o.displayName=l.VY.displayName}},function(e){e.O(0,[6137,4104,429,7025,9815,1312,6478,2777,7503,2971,2117,1744],function(){return e(e.s=5352)}),_N_E=e.O()}]);